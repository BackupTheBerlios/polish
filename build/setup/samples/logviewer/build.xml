<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="j2mepolish" name="enough-polish-example">

	<!-- The wtk.home property should point to the directory      -->
	<!-- containing the Wireless Toolkit.                         -->
	<property name="wtk.home" value="%{WTK_HOME}" />
	<!-- The polish.home property should point to the directory   -->
	<!-- containing the J2ME Polish installation.                 -->
	<property name="polish.home" value="%{INSTALL_PATH}" />
		
	<!-- The siemens.home, nokia.home and motorola.home-          -->
	<!-- properties can be necessary when their emulators         -->
	<!-- should be started.                                       -->
	<!-- The directory which contains the Siemens-SMTK
		<property name="siemens.home" value="C:\siemens" />
	-->
	<!-- The directory which contains the Nokia-emulators
		<property name="nokia.home" value="C:\Nokia" />
	-->
	<!-- The path to the Sony-Ericsson SDK
		<property name="sony-ericsson.home" value="C:\SonyEricsson\J2ME_SDK" />
	-->
	<!-- The directory which contains the Motorola-emulators
		<property name="motorola.home" value="C:\Program Files\Motorola\SDK v4.3 for J2ME" />
	-->

	<!-- Definition of the J2ME Polish task:                      -->
	<taskdef name="j2mepolish" 
		classname="de.enough.polish.ant.PolishTask" 
		classpath="${polish.home}/import/enough-j2mepolish-build.jar:${polish.home}/import/jdom.jar"
	/>

			
	<!-- build targets, each target can be called via "ant [name]", 
		 e.g. "ant clean", "ant notest j2mepolish" or just "ant" for calling the default-target -->
	
	<target name="test">
		<property name="test" value="true"/>
		<property name="dir.work" value="build/test" />
	</target>
		

	<target name="init">
	  	<property name="test" value="false"/>
		<property name="deploy-url" value=""/>
		<property name="dir.work" value="build/real" />
	</target>
    
	<target depends="init" name="j2mepolish">
		<j2mepolish>
		    <!-- general settings -->
			<info 
				license="%{J2ME_POLISH_LICENSE}"
				copyright="Copyright 2005 Enough Software. All rights reserved." 
				description="A log viewer." 
				jarName="${polish.vendor}-${polish.name}-logviewer.jar" 
				name="Logviewer" 
				vendorName="Enough Software" 
				version="0.9.0"
		    />
			<!-- selection of supported devices -->
			<deviceRequirements if="test">
				<requirement name="Identifier" value="Nokia/Series60Midp2"/>
			</deviceRequirements>
			<deviceRequirements unless="test">
				<requirement name="Identifier" value="Nokia/6630, Motorola/A1000, Sony-Ericsson/K700, Siemens/S65"/>
			</deviceRequirements>
		    <!-- build settings -->
			<build 
				fullscreen="menu" 
	            usePolishGui="yes"
	            sourceDir="source/src"
				workDir="${dir.work}"
				>
				<!-- midlets definition -->
				<midlet class="de.enough.polish.log.rms.LogViewerMidlet" name="Log Viewer"/>
				<!-- project-wide variables - used for preprocessing  -->
				<variables>
					<variable name="polish.classes.ApplicationInitializer" value="de.enough.polish.log.rms.LogViewerMidlet" />
					<variable name="polish.TextField.useDirectInput" value="true" unless="polish.hasPointerEvents" />
					<!--
					You need to change the polish.log.MIDletSuite and polish.log.Vendor
					preprocessing variables if you want to use the Logviewer for showing
					RMS logfiles of your application.
					See the readme.txt file for further explanations.
					-->
					<!-- example:
					<variable name="polish.log.MIDletSuite" value="Demonstrator" />
					<variable name="polish.log.Vendor" value="Enough Software" />
					-->
				</variables>
				<!-- obfuscator settings: do not obfuscate when the test-property is true unless="test" -->
				<obfuscator name="ProGuard" useDefaultPackage="true" unless="test" >
				</obfuscator>
				
				<resources
					dir="resources" 
					defaultexcludes="yes"
					excludes="*.db"
				 >
					 <localization
						locales="en"
					 />
				</resources>
			</build>
			
			<!-- execution of emulator(s) -->
			<emulator if="test"	/>
		</j2mepolish>
	</target>
	
	
	<target description="allows a clean build. You should call [ant clean] whenever you made changes to devices.xml, vendors.xml or groups.xml" name="clean">
		<delete dir="build"/>
		<delete dir="dist"/>
	</target>

</project>
