<%define inDocumentationSection %>
<%define inDocumentationSection.platform %>
<%set title = J2ME Polish: Android Development %>
<%set basedir = ../ %> 

<%include start.txt %>

<h1 id="top">Developing for Android Devices</h1>
The Android platform is a Java - driven platform for mobile devices from
Google. In J2ME Polish, you can develop normal MIDlet applications and
simply convert these applications to the native Android application
format.
<h2 id="android-preparation">Preparations</h2>
<p>To create and deploy application for Android all thats needed is
the android sdk with the version 1.0 or higher. Please visit the <a
	href="http://code.google.com/android/download.html">Android
Download Site</a> to download the SDK for your operation system and install
it.</p>
<p>Optionally, you can install the Android ADT Plugins for eclipse.
For further information how to install the plugins, go to the <a
	href="http://code.google.com/android/intro/installing.html">Android
Installation Guide</a>.</p>
<p>After the installation of the Android SDK you should define the <code>android.home</code> property
in either <i>${polish.home}/global.properties</i>,
${project.home}/${user.name}.properties or in your <i>build.xml</i>
script. In your <i>build.xml</i> script the definition could look like
this:
<pre>
&lt;property 
	name=&quot;android.home&quot; 
	location=&quot;C:/Program Files/android-sdk-windows-1.0_r1&quot; 
/&gt;
</pre>
</p>
<h2 id="blackberry-building">Building Android Application</h2>
<p>To convert, compile and package your source code for the Android
platform, you simply need to set <i>Generic/android</i> as the device to
build your application for. This device has a resolution of 240 x 320
and has all default features of an Android phone. Future versions of
J2ME Polish will add more sophisticated devices like the T-Mobile G1.</p>
<p>The building of the application is done in these steps:
<ol>
	<li>An activity is created in <code>/activity</code> of the
	Android build folder. </li>
	<li>The <i>R.java</i> / <i>Manifest.java</i> files are created from the resources and
	sources via <code>aapt</code> of the Android SDK</li>
	<li>The code is compiled with <code>target</code> and <code>source</code> set to <code>Java 1.5</code> (so yes, you can use Generics etc)</li>
	<li>A file named <i>classes.dex</i> is created from the source code using the <code>dx</code> utility 
	of the Android SDK</li>
	<li>The resources are packed to a <i>.ap_</i> file with <code>aapt</code></li>
	<li>The application is packaged to a <i>.apk</i> file with the SDK's <code>apkbuilder</code> command</li>
</ol>
</p>
<b>
Please note that the current android conversion is in its first stages. So far only the 
Polish API and HTTP are supported. Other packages and features will follow soon.
</b>
<h2 id="blackberry-testing">Testing Android application</h2>
<p>
There are two possibilities to test Android application build with J2ME Polish:
</p>
<ul>
<li>
If the <code>test</code> Ant property is set to true or if you call the <code>emulator</code> target, 
the Android emulator is started automatically 
and the application is installed. Before launching your application, please wait for the <i>build.xml</i>
to output <i>Successfully installed</i>. To rebuild the application and test it, just cancel 
the running <i>build.xml</i> and leave the emulator running, the build process will automatically detect 
if there's an emulator running and install the application to the running emulator. You can also 
start the emulator before the build process is started.
</li>
<li>
The created activity in the <code>build</code> folder can also be imported to eclipse and used to 
test via the Android ADT Plugins if they're installed. Please note that you need to fix the project to use it with the ADT
plugins. To do so, right-click the imported activity and run <i>Android
Tools / Fix Project Properties</i>.
</li>
</ul>
<h2 id="blackberry-troubleshooting">Troubleshooting</h2>
<b>The creation of the .dex file terminates with an OutOfMemoryError</b>
<p>
This error is quite common and due to insufficient memory settings in the dx executable of the android installation.
Please go to ${android.home}/tools and open the dx executable. Remove <code>REM</code> from the line
<pre>
REM set javaOpts=-Xmx256M
</pre>
and rerun the build process. If the error occurs again, increase the settings for -Xmx to a higher amount.
</p>

<h2 id="blackberry-roadmap">Roadmap</h2>
<p>
Future versions of the android conversion will support the conversion of the following Java Packages : 
<ul>
<li>
RMS
</li>
<li>
Multimedia API
</li>
<li>
Location API
</li>
<li>
Bluetooth API
</li>
</ul>
</p>

<%include end.txt %>
